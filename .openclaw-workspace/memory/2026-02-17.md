# 2026-02-17 — Daily Notes

## Mac Mini Setup Planning (Major Session)

### Context

- Kamil got a Mac Mini M4 24GB 512GB SSD as permanent hardware for running Kai
- Previously running inside disposable Claude Code remote containers on Anthropic cloud
- Need to figure out how to run OpenClaw on mac mini using $200/mo Max subscription

### Current Setup (Discovered)

- Running inside CC remote container (CLAUDE_CODE_REMOTE=true)
- Auth: sk-ant-si-\* session ingress token (4hr JWT, auto-refreshed by CC backend)
- OpenClaw reads token from `/home/claude/.claude/remote/.session_ingress_token`
- Re-reads on every API call, swaps automatically when CC refreshes it
- Keepalive hook pings Anthropic every 60s to prevent session timeout
- All billed to Max subscription via session ingress, NOT API credits
- Kamil built the keepalive system to keep chatting on Telegram without CC dying

### Decision: Setup Token for Mac Mini

- Evaluated 3 methods: API key (pay-per-token), OAuth (dead), Setup Token (flat sub)
- Setup token (sk-ant-oat01-\*) is the official replacement for OAuth
- Supported natively by OpenClaw: `openclaw models auth setup-token --provider anthropic`
- Routes through Max sub = $0 per-token cost
- `claude setup-token` generates from Claude Code CLI
- Docs confirm: `setup-token` is "preferred Anthropic auth"

### CC Remote vs Local CC

- Remote: ephemeral sk-ant-si-\* tokens, 4hr TTL, needs keepalive
- Local: persistent OAuth in ~/.claude/, no session timeout, no keepalive needed
- Setup token is the correct method for mac mini (not CC wrapper)

### Key Technical Findings

- `openclaw onboard --auth-choice setup-token --install-daemon` — full non-interactive setup
- `openclaw gateway install` — creates launchd plist on macOS
- `openclaw models status --check` — exit codes 0/1/2 for OK/expired/expiring
- `openclaw security audit --fix` — auto-hardens config
- `paste-token` accepts `--provider`, `--profile-id`, `--expires-in` flags

### Guides Created

- `guides/cc-remote-container-setup.md` — documents current disposable setup
- `guides/mac-mini-setup-token.md` — step-by-step token setup
- `guides/mac-mini-full-plan.md` — comprehensive v2 migration plan with:
  - Phased approach (prepare → setup → auth → migrate → launch → monitoring)
  - macOS config (sleep prevention, auto-restart, firewall)
  - Auto token refresh script + launchd plist
  - Telegram alerts on refresh failure
  - Security hardening
  - Day 2 operations guide
  - Troubleshooting table
  - Unknowns to verify first week

### Risks Noted

- Setup token could be restricted by Anthropic (same pattern as OAuth)
- Mitigation: API key as fallback, reasonable usage, one-config-change swap
- Token refresh script may not work if `claude setup-token` needs browser interaction
- Unknown: actual token lifetime

## Other

- Kamil's email: kamil@bagirov.ca (seen in JWT payload)
- Ran 10 check-in reminders (1/min for 10 min) — Kamil tested cron system
- Multi-agent marketing team idea still pending (from Nano's blueprint)
- Nano = previous name shown for Kai's messages in Telegram
